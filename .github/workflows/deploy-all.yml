name: deploy-all

on:
  workflow_dispatch:
    inputs:
          
      choice_stage:
        type: choice
        description: Make a choice for stage
        options:
          - sandbox
          - dev
          - prod
                  
      choice_region:
        type: choice
        description: Make a choice for region
        default: ""
        required: false
        options:
          - all
          - ap-south-1
          - us-east-2
          - ap-northeast-2
          - eu-central-1
                    
      choice_service:
        type: choice
        description: Make a choice for service
        default: ""
        required: false
        options:
          - all
          - auth
          - account
          - part
          - document
          
          
      handler:
        description: Enter handler name
        default: ""
        required: false
        type: string

jobs:
  start_deploy:
    name: build-n-deploy-services
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the code
        uses: actions/checkout@v2
   
      - name: display
        run: |
         echo "Stage is ${{ github.event.inputs.choice_stage }}"
         echo "Region is ${{ github.event.inputs.choice_region }}"
         echo "Service is ${{ github.event.inputs.choice_service }}"
         echo "Handler name is ${{ github.event.inputs.handler }}"

      - name: check stage sandbox
        if: ${{ github.event.inputs.choice_stage  == 'sandbox' }}
        run: echo 'Stage is sandbox, set aws credentials for sandbox environment .'
        
      - name: check stage dev 
        if: ${{ github.event.inputs.choice_stage  == 'dev' }}
        run: echo 'Stage is dev, set aws credentials for dev environment . '
        
      - name: check stage prod
        if: ${{ github.event.inputs.choice_stage  == 'prod' }}
        run: echo 'Stage is prod, set aws credentials for prod environment . '
    
            

